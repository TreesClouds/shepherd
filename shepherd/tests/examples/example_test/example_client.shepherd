READ LCM_TARGETS.SCOREBOARD
RUN done1 = False
RUN done2 = False
EMIT SHEPHERD_HEADER.START_NEXT_STAGE TO LCM_TARGETS.SHEPHERD
WHILE not (done1 and done2)
  WAIT SCOREBOARD_HEADER.STAGE FROM LCM_TARGETS.SCOREBOARD WITH stage = 'stage' SET done1 = True AND SCOREBOARD_HEADER.STAGE_TIMER_START FROM LCM_TARGETS.SCOREBOARD WITH time = 'time' SET done2 = True
END
PRINTP "time:{}, stage:{}".format(time,stage)
